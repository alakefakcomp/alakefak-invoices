<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Alakefak Furniture Movers - Invoice Generator</title>
    <link rel="stylesheet" href="styles.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>
</head>
<body>
    <!-- Navigation -->
    <nav class="navbar">
        <div class="nav-container">
            <h2>Alakefak Furniture Movers - Invoice System</h2>
            <div class="nav-buttons">
                <button onclick="newInvoice()" class="btn btn-primary">New Invoice</button>
                <button onclick="viewSavedInvoices()" class="btn btn-secondary">View Saved Invoices</button>
            </div>
        </div>
    </nav>

    <!-- Main Invoice Form -->
    <div class="container">
        <div id="invoice-form" class="invoice-container">
            <!-- Invoice Content for PDF -->
            <div id="invoice-content" class="invoice-content">
                <!-- Company Header -->
                <div class="company-header">
                    <div class="header-content">
                        <div class="company-info-arabic">
                            <h1>مؤسسة على كيفك لنقل الأثاث</h1>
                            <h2>مؤسسة وطنية</h2>
                        </div>
                        <div class="logo-container">
                            <div class="logo-circle">
                                <img id="company-logo" src="" alt="Company Logo" style="display: none;">
                            </div>
                        </div>
                        <div class="company-info-english">
                            <h1>Ala Kaifak Furniture Movers</h1>
                        </div>
                    </div>
                </div>

                <!-- Invoice Title -->
                <div class="invoice-title">
                    <h2>TAX INVOICE</h2>
                </div>

                <!-- Invoice Details Header -->
                <div class="invoice-header">
                    <div class="bill-to-section">
                        <div class="bill-to-field">
                            <label>Bill To:</label>
                            <input type="text" id="billTo" class="form-input" placeholder="Customer Name">
                        </div>
                        <div class="trn-field">
                            <label>TRN:</label>
                            <input type="text" id="trn" class="form-input" placeholder="Tax Registration Number">
                        </div>
                    </div>
                    <div class="invoice-meta">
                        <div class="meta-field">
                            <label>Date:</label>
                            <input type="date" id="invoiceDate" class="form-input">
                        </div>
                        <div class="meta-field">
                            <label>INVOICE NO.</label>
                            <input type="text" id="invoiceNumber" class="form-input" placeholder="Auto-generated">
                        </div>
                        <div class="meta-field">
                            <label>Address:</label>
                            <input type="text" id="address" class="form-input" value="Abu Dhabi">
                        </div>
                        <div class="meta-field">
                            <label>BOX:</label>
                            <input type="text" id="box" class="form-input" value="130483">
                        </div>
                        <div class="meta-field">
                            <label>TRN#:</label>
                            <input type="text" id="companyTrn" class="form-input" value="100234725800003">
                        </div>
                    </div>
                </div>

                <!-- Items Table -->
                <div class="items-section">
                    <table class="items-table" id="itemsTable">
                        <thead>
                            <tr>
                                <th>Item</th>
                                <th>Description</th>
                                <th>Quantity</th>
                                <th>Unit Rate</th>
                                <th>Amount</th>
                                <th>5% VAT</th>
                                <th>Total Amount</th>
                                <th class="no-print">Action</th>
                            </tr>
                        </thead>
                        <tbody id="itemsBody">
                            <tr class="item-row">
                                <td><input type="text" class="item-input" placeholder="1"></td>
                                <td><input type="text" class="item-input description-input" placeholder="Service description"></td>
                                <td><input type="number" class="item-input quantity-input" placeholder="1" min="1"></td>
                                <td><input type="number" class="item-input rate-input" placeholder="0.00" step="0.01"></td>
                                <td class="amount-cell">0.00 AED</td>
                                <td class="vat-cell">0.00 AED</td>
                                <td class="total-cell">0.00 AED</td>
                                <td class="no-print"><button onclick="removeItem(this)" class="btn btn-danger btn-sm">Remove</button></td>
                            </tr>
                        </tbody>
                    </table>
                    
                    <div class="table-controls no-print">
                        <button onclick="addItem()" class="btn btn-secondary">Add Item</button>
                    </div>
                    
                    <!-- Totals Section -->
                    <div class="totals-section">
                        <div class="totals-row">
                            <span class="total-label">Total</span>
                            <div class="totals-amounts">
                                <span id="subtotal">0.00 AED</span>
                                <span id="totalVat">0.00 AED</span>
                                <span id="grandTotal">0.00 AED</span>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Amount in Words -->
                    <div class="amount-words">
                        <span id="amountInWords">Zero AED only</span>
                    </div>
                </div>

                <!-- Company Footer -->
                <div class="company-footer">
                    <div class="bank-info">
                        <div class="stamp-container">
                            <img id="company-stamp" src="" alt="Company Stamp" style="display: none;">
                        </div>
                        <div class="bank-details">
                            <div class="bank-name">ALA KAIFAK FURNITURE MOVERS</div>
                            <div class="bank-details-text">
                                <div>BANK: FIRST ABU DHABI BANK</div>
                                <div>IBAN: AE530351411323477485017</div>
                                <div>A/C NO: 1411323477485017</div>
                            </div>
                        </div>
                        <div class="signature-container">
                            <img id="company-signature" src="" alt="Signature" style="display: none;">
                        </div>
                    </div>
                    
                    <div class="contact-info">
                        <div class="contact-details">
                            Tel.: +971 2 5529191, Fax: +971 2 5529195, Mob.: +971 50 8199942, P.O.Box: 130483, Abu Dhabi - U.A.E.
                        </div>
                        <div class="email-info">
                            E-mail: alakefakcomp@gmail.com
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Control Panel -->
        <div class="control-panel no-print">
            <div class="panel-section">
                <h3>Invoice Actions</h3>
                <button onclick="generatePDF()" class="btn btn-success">Generate & Download PDF</button>
                <button onclick="saveInvoice()" class="btn btn-primary">Save Invoice</button>
                <button onclick="printInvoice()" class="btn btn-secondary">Print Invoice</button>
            </div>
            
            <div class="panel-section">
                <h3>Upload Company Assets (Optional)</h3>
                <div class="upload-group">
                    <label for="logoUpload">Company Logo:</label>
                    <input type="file" id="logoUpload" accept="image/*" onchange="handleLogoUpload(event)">
                </div>
                <div class="upload-group">
                    <label for="stampUpload">Company Stamp:</label>
                    <input type="file" id="stampUpload" accept="image/*" onchange="handleStampUpload(event)">
                </div>
                <div class="upload-group">
                    <label for="signatureUpload">Signature:</label>
                    <input type="file" id="signatureUpload" accept="image/*" onchange="handleSignatureUpload(event)">
                </div>
            </div>
        </div>

        <!-- Saved Invoices Modal -->
        <div id="savedInvoicesModal" class="modal">
            <div class="modal-content">
                <span class="close" onclick="closeSavedInvoicesModal()">&times;</span>
                <h2>Saved Invoices</h2>
                <div id="savedInvoicesList"></div>
            </div>
        </div>
    </div>

    <script src="script.js"></script>
</body>
</html>
