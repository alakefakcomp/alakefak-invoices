/* Reset and base styles */
* { box-sizing: border-box; }
body { font-family: Arial, Helvetica, sans-serif; margin: 0; color: #000; background: #ffffff; }

.navbar { background: #0d47a1; color: #fff; padding: 10px 16px; position: sticky; top: 0; z-index: 10; }
.nav-container { display: flex; justify-content: space-between; align-items: center; max-width: 1000px; margin: 0 auto; }
.nav-buttons .btn { margin-left: 8px; }

.container { max-width: 1000px; margin: 16px auto; padding: 0 12px; }

.btn { border: 0; padding: 10px 14px; border-radius: 6px; cursor: pointer; }
.btn-primary { background: #1565c0; color: #fff; }
.btn-secondary { background: #78909c; color: #fff; }
.btn-success { background: #2e7d32; color: #fff; }
.btn-danger { background: #c62828; color: #fff; }
.btn-sm { padding: 4px 8px; font-size: 12px; }

.invoice-container { background: #fff; padding: 12px; border-radius: 12px; box-shadow: 0 2px 10px rgba(0,0,0,0.08); }
.invoice-content { 
  background: #ffffff; 
  padding: 25px; 
  border: 2px solid #000; 
  border-radius: 15px; 
  min-height: 800px; 
  display: flex; 
  flex-direction: column; 
  position: relative;
}

.company-header { border-bottom: 2px solid #000; padding-bottom: 20px; margin-bottom: 25px; }
.header-content { display: flex; justify-content: space-between; align-items: center; }
.company-info-arabic { text-align: left; }
.company-info-arabic h1 { font-size: 22px; margin: 3px 0; color: #0d47a1; font-weight: bold; }
.company-info-arabic h2 { font-size: 15px; margin: 3px 0; color: #0d47a1; font-weight: bold; }
.company-info-english h1 { font-size: 22px; margin: 3px 0; color: #0d47a1; text-align: right; font-weight: bold; }
.logo-container { display: flex; justify-content: center; align-items: center; }
.logo-circle { width: 200px; height: 200px; border: 3px solid #0d47a1; border-radius: 50%; display: flex; justify-content: center; align-items: center; background: #fff; overflow: hidden; }
.logo-container img { max-width: 180px; max-height: 180px; object-fit: cover; width: 180px; height: 180px; border-radius: 50%; }

.invoice-title { text-align: center; font-weight: bold; margin: 20px 0; }
.invoice-title h2 { margin: 0; text-decoration: underline; font-size: 24px; }

.invoice-header { display: grid; grid-template-columns: 1fr 1fr; gap: 15px; border: 2px solid #000; padding: 15px; margin-bottom: 25px; }
.bill-to-section { border-right: 2px solid #000; padding-right: 15px; }
.bill-to-field, .trn-field { margin-bottom: 10px; }
.bill-to-field label, .trn-field label { font-weight: bold; font-size: 14px; }
.invoice-meta { display: grid; grid-template-columns: 1fr 1fr; gap: 8px; }
.meta-field { display: flex; justify-content: space-between; align-items: center; border-bottom: 1px solid #ddd; padding: 4px 0; }
.meta-field label { font-weight: bold; margin-right: 8px; font-size: 13px; }
.form-input { width: 100%; border: none; border-bottom: 1px dashed #999; padding: 6px; outline: none; font-size: 13px; word-wrap: break-word; overflow-wrap: break-word; white-space: pre-wrap; height: auto; min-height: 25px; resize: none; }

.items-section { margin-top: 15px; flex-grow: 1; }
.items-table { width: 100%; border-collapse: collapse; font-size: 14px; margin-bottom: 20px; }
.items-table th, .items-table td { border: 2px solid #000; padding: 10px; vertical-align: top; }
.items-table th { background: #eaf2ff; font-weight: bold; text-align: center; }
.item-input { width: 100%; border: 0; outline: none; padding: 8px; font-size: 13px; }
.description-input { 
  width: 100%; 
  border: none; 
  outline: none; 
  resize: vertical; 
  font-family: Arial, sans-serif; 
  font-size: 12px; 
  padding: 8px; 
  min-height: 60px; 
  overflow: auto; 
  line-height: 1.4;
  word-wrap: break-word;
  box-sizing: border-box;
}
.quantity-input, .rate-input { width: 80px; border: none; outline: none; text-align: center; font-size: 12px; padding: 4px; font-weight: bold; }
.currency { font-size: 10px; color: #666; margin-left: 2px; }
.amount-cell, .vat-cell, .total-cell { text-align: right; white-space: nowrap; font-weight: bold; }

.table-controls { margin: 12px 0; text-align: right; }

.totals-section { display: flex; justify-content: flex-end; margin: 25px 0 20px 0; }
.totals-row { display: flex; align-items: baseline; gap: 30px; border-top: 3px solid #000; padding-top: 12px; }
.total-label { font-weight: bold; color: #e53935; text-decoration: underline; font-size: 16px; }
.totals-amounts span { display: inline-block; width: 110px; text-align: right; margin-left: 15px; font-weight: bold; font-size: 14px; }
.amount-words { color: #e53935; margin: 15px 0; font-weight: bold; text-decoration: underline; font-size: 15px; text-align: left; }

.company-footer { margin-top: auto; padding-top: 25px; border-top: 2px solid #000; }

/* Footer Section */
.footer-section { display: flex; justify-content: space-between; align-items: flex-end; margin-bottom: 20px; }

.stamp-area { display: flex; flex-direction: column; align-items: center; gap: 20px; }
.stamp-container { text-align: center; }
.stamp-container img { max-width: 200px; max-height: 200px; object-fit: contain; }
.signature-line { width: 150px; height: 80px; display: flex; align-items: center; justify-content: center; }
.signature-line img { max-height: 70px; max-width: 140px; object-fit: contain; }

.bank-details { text-align: right; }
.bank-info-box { border: 2px solid #2c3e50; padding: 15px; background: #e8f4fd; font-size: 12px; line-height: 1.4; font-weight: bold; }
.bank-info-box div { margin-bottom: 3px; }

/* Contact Information */
.contact-info { text-align: center; margin-top: 15px; padding-top: 10px; font-size: 11px; color: #333; }
.contact-row-top, .contact-row-bottom { font-weight: bold; margin: 5px 0; }

.control-panel { margin-top: 16px; display: grid; grid-template-columns: 1fr 1fr; gap: 12px; }
.panel-section { background: #fff; padding: 12px; border-radius: 8px; box-shadow: 0 2px 10px rgba(0,0,0,0.08); }
.upload-group { margin: 8px 0; }
.size-control { margin-top: 5px; display: flex; align-items: center; gap: 10px; }
.size-control input[type="range"] { flex: 1; }
.size-control span { font-size: 12px; color: #666; min-width: 50px; }

/* Modal */
.modal { display: none; position: fixed; z-index: 100; left: 0; top: 0; width: 100%; height: 100%; overflow: auto; background-color: rgba(0,0,0,0.4); }
.modal-content { background-color: #fefefe; margin: 10% auto; padding: 20px; border: 1px solid #888; width: 90%; max-width: 800px; border-radius: 8px; }
.close { color: #aaa; float: right; font-size: 28px; font-weight: bold; cursor: pointer; }

/* Print Styles: force single A4 page */
@media print {
  body { background: #fff !important; }
  
  /* Hide all control elements */
  .no-print, 
  .navbar, 
  .control-panel, 
  .panel-section,
  .table-controls,
  button,
  .btn,
  .nav-buttons { 
    display: none !important; 
    visibility: hidden !important;
  }
  
  /* Only show the invoice content */
  .container { margin: 0; max-width: none; padding: 0; }
  .invoice-container { box-shadow: none; padding: 0; margin: 0; }
  .invoice-content { 
    width: 210mm !important; 
    max-height: 290mm !important;
    padding: 8mm !important;
    margin: 0 auto !important; 
    border: 2px solid #000 !important;
    border-radius: 0 !important;
    position: relative !important;
    transform-origin: top left !important;
    font-size: 11px !important;
    overflow: hidden !important;
    background: #fff !important;
  }
  
  /* Clean up the page */
  html, body { 
    height: 297mm !important; 
    overflow: hidden !important;
    margin: 0 !important;
    padding: 0 !important;
  }
  
  /* Table optimizations for print */
  .items-table { font-size: 10px !important; }
  .items-table th, .items-table td { 
    padding: 6px !important; 
    border: 2px solid #000 !important;
  }
  .description-input { 
    font-size: 10px !important;
    border: none !important;
    background: transparent !important;
    resize: none !important;
  }
  
  /* Form inputs for print */
  .form-input {
    border: none !important;
    background: transparent !important;
    border-bottom: 1px solid transparent !important;
  }
  
  /* Layout adjustments */
  .company-header { padding-bottom: 12px; margin-bottom: 15px; }
  .invoice-header { margin-bottom: 15px; }
  .amount-words { font-size: 12px; }
  .company-footer { padding-top: 15px; }
  
  /* Remove any transforms or scaling for print */
  * {
    -webkit-print-color-adjust: exact !important;
    print-color-adjust: exact !important;
  }
}

/* Template Styles */

/* Classic Template */
.template-classic {
  font-family: 'Times New Roman', serif;
  border-color: #8b4513;
}
.template-classic .company-header { border-color: #8b4513; background: #faf5f0; }
.template-classic .invoice-header { border-color: #8b4513; }
.template-classic .items-table th, .template-classic .items-table td { border-color: #8b4513; }
.template-classic .company-info-arabic h1, .template-classic .company-info-english h1 { color: #8b4513; }
.template-classic .logo-circle { border-color: #8b4513; }

/* Minimal Template */
.template-minimal {
  border: 1px solid #ddd;
  font-weight: 300;
}
.template-minimal .company-header { border-bottom: 1px solid #ddd; background: #f9f9f9; }
.template-minimal .invoice-header { border: 1px solid #ddd; }
.template-minimal .items-table th, .template-minimal .items-table td { border: 1px solid #ddd; }
.template-minimal .items-table th { background: #f5f5f5; }
.template-minimal .logo-circle { border-color: #666; }

/* Elegant Template */
.template-elegant {
  border-color: #2c3e50;
  font-family: Georgia, serif;
}
.template-elegant .company-header { border-color: #2c3e50; background: linear-gradient(135deg, #f5f7fa 0%, #c3cfe2 100%); }
.template-elegant .invoice-header { border-color: #2c3e50; }
.template-elegant .items-table th, .template-elegant .items-table td { border-color: #2c3e50; }
.template-elegant .items-table th { background: #34495e; color: white; }
.template-elegant .company-info-arabic h1, .template-elegant .company-info-english h1 { color: #2c3e50; }
.template-elegant .logo-circle { border-color: #2c3e50; }

/* Corporate Blue Template */
.template-corporate {
  border-color: #1565c0;
  font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
}
.template-corporate .company-header { border-color: #1565c0; background: linear-gradient(135deg, #e3f2fd 0%, #bbdefb 100%); }
.template-corporate .invoice-header { border-color: #1565c0; }
.template-corporate .items-table th, .template-corporate .items-table td { border-color: #1565c0; }
.template-corporate .items-table th { background: #1976d2; color: white; }
.template-corporate .company-info-arabic h1, .template-corporate .company-info-english h1 { color: #1565c0; }
.template-corporate .logo-circle { border-color: #1565c0; }
.template-corporate .total-label { color: #1565c0; }
.template-corporate .amount-words { color: #1565c0; }

/* Luxury Gold Template */
.template-luxury {
  border-color: #ff8f00;
  font-family: 'Playfair Display', serif;
}
.template-luxury .company-header { border-color: #ff8f00; background: linear-gradient(135deg, #fff8e1 0%, #ffecb3 100%); }
.template-luxury .invoice-header { border-color: #ff8f00; }
.template-luxury .items-table th, .template-luxury .items-table td { border-color: #ff8f00; }
.template-luxury .items-table th { background: #ffa000; color: white; }
.template-luxury .company-info-arabic h1, .template-luxury .company-info-english h1 { color: #ff8f00; }
.template-luxury .logo-circle { border-color: #ff8f00; }
.template-luxury .total-label { color: #ff8f00; }
.template-luxury .amount-words { color: #ff8f00; }

/* Tech Modern Template */
.template-tech {
  border-color: #00bcd4;
  font-family: 'Roboto', sans-serif;
  background: linear-gradient(135deg, #f0f9ff 0%, #e0f2fe 100%);
}
.template-tech .company-header { border-color: #00bcd4; background: #006064; color: white; }
.template-tech .company-info-arabic h1, .template-tech .company-info-english h1 { color: #00bcd4; }
.template-tech .invoice-header { border-color: #00bcd4; }
.template-tech .items-table th, .template-tech .items-table td { border-color: #00bcd4; }
.template-tech .items-table th { background: #0097a7; color: white; }
.template-tech .logo-circle { border-color: #00bcd4; }
.template-tech .total-label { color: #00bcd4; }
.template-tech .amount-words { color: #00bcd4; }

/* Vintage Style Template */
.template-vintage {
  border-color: #8d6e63;
  font-family: 'Georgia', serif;
  background: #f3e5ab;
}
.template-vintage .company-header { border-color: #8d6e63; background: #d7ccc8; }
.template-vintage .invoice-header { border-color: #8d6e63; }
.template-vintage .items-table th, .template-vintage .items-table td { border-color: #8d6e63; }
.template-vintage .items-table th { background: #a1887f; color: white; }
.template-vintage .company-info-arabic h1, .template-vintage .company-info-english h1 { color: #8d6e63; }
.template-vintage .logo-circle { border-color: #8d6e63; }
.template-vintage .total-label { color: #8d6e63; }
.template-vintage .amount-words { color: #8d6e63; }

/* Colorful Creative Template */
.template-colorful {
  border: 3px solid;
  border-image: linear-gradient(45deg, #ff6b6b, #4ecdc4, #45b7d1, #f9ca24) 1;
  font-family: 'Comic Sans MS', cursive;
}
.template-colorful .company-header { 
  border-bottom: 3px solid #ff6b6b; 
  background: linear-gradient(135deg, #ff9a9e 0%, #fecfef 50%, #fecfef 100%); 
}
.template-colorful .invoice-header { border: 2px solid #4ecdc4; }
.template-colorful .items-table th, .template-colorful .items-table td { border: 2px solid #45b7d1; }
.template-colorful .items-table th { background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); color: white; }
.template-colorful .company-info-arabic h1, .template-colorful .company-info-english h1 { 
  background: linear-gradient(45deg, #ff6b6b, #4ecdc4);
  -webkit-background-clip: text;
  -webkit-text-fill-color: transparent;
  background-clip: text;
}
.template-colorful .logo-circle { border: 3px solid #f9ca24; }
.template-colorful .total-label { color: #ff6b6b; }
.template-colorful .amount-words { color: #4ecdc4; }

/* Mobile Responsive - PERFECT FOR PHONES */
@media (max-width: 768px) {
  /* Make everything phone-friendly */
  body { font-size: 14px; }
  .container { padding: 8px; margin: 8px auto; }
  .invoice-container { padding: 8px; }
  .invoice-content { padding: 15px; font-size: 12px; }
  
  /* Navigation */
  .navbar { padding: 8px 12px; }
  .nav-container { flex-direction: column; gap: 10px; }
  .nav-container h2 { font-size: 16px; margin: 0; }
  .nav-buttons { display: flex; gap: 8px; }
  .nav-buttons .btn { padding: 8px 12px; font-size: 12px; }
  
  /* Header - Stack vertically on mobile */
  .header-content { flex-direction: column; gap: 15px; text-align: center; }
  .company-info-arabic, .company-info-english { text-align: center; }
  .company-info-arabic h1, .company-info-english h1 { font-size: 16px; }
  
  /* Logo circle - smaller on mobile */
  .logo-circle { width: 120px; height: 120px; }
  .logo-container img { max-width: 110px; max-height: 110px; }
  
  /* Invoice header - single column */
  .invoice-header { 
    grid-template-columns: 1fr; 
    gap: 10px; 
    padding: 10px; 
  }
  .bill-to-section { 
    border-right: none; 
    border-bottom: 2px solid #000; 
    padding-right: 0; 
    padding-bottom: 10px; 
    margin-bottom: 10px;
  }
  
  /* Table - horizontal scroll */
  .items-section { overflow-x: auto; }
  .items-table { 
    min-width: 600px; 
    font-size: 10px; 
  }
  .items-table th, .items-table td { 
    padding: 6px 4px; 
  }
  .description-input { 
    min-width: 120px; 
    font-size: 10px; 
  }
  .quantity-input, .rate-input { 
    width: 60px; 
    font-size: 10px; 
  }
  
  /* Totals section */
  .totals-row { 
    flex-direction: column; 
    align-items: stretch; 
    gap: 10px; 
  }
  .totals-amounts { 
    display: flex; 
    flex-direction: column; 
    gap: 5px; 
  }
  .totals-amounts span { 
    width: auto; 
    text-align: left; 
    margin-left: 0; 
    padding: 8px; 
    background: #f5f5f5; 
    border-radius: 4px; 
  }
  
  /* Footer - stack vertically */
  .footer-section { 
    flex-direction: column; 
    gap: 20px; 
    align-items: center; 
  }
  .bank-details { text-align: center; }
  
  /* Control panel - single column */
  .control-panel { 
    grid-template-columns: 1fr; 
    gap: 8px; 
  }
  .panel-section { 
    padding: 10px; 
  }
  .panel-section h3 { 
    font-size: 14px; 
    margin-bottom: 8px; 
  }
  
  /* Buttons - full width on mobile */
  .btn { 
    width: 100%; 
    margin-bottom: 8px; 
    padding: 12px; 
    font-size: 14px; 
  }
  
  /* Form inputs */
  .form-input { 
    font-size: 14px; 
    padding: 8px; 
    margin-bottom: 8px; 
  }
  
  /* Size controls */
  .size-control { 
    flex-direction: column; 
    align-items: stretch; 
    gap: 5px; 
  }
  .size-control input[type="range"] { 
    width: 100%; 
  }
  
  /* Modal responsive */
  .modal-content { 
    margin: 5% auto; 
    padding: 15px; 
    width: 95%; 
    max-height: 80vh; 
    overflow-y: auto; 
  }
  
  /* Hide some elements on very small screens */
  @media (max-width: 480px) {
    .company-info-arabic, .company-info-english { 
      display: none; 
    }
    .logo-circle { 
      width: 80px; 
      height: 80px; 
    }
    .logo-container img { 
      max-width: 70px; 
      max-height: 70px; 
    }
  }
}

/* Mobile device class - added dynamically by JavaScript */
.mobile-device .btn {
  min-height: 44px !important;
  font-size: 16px !important;
  padding: 12px 16px !important;
}

.mobile-device .form-input {
  font-size: 16px !important;
  padding: 10px !important;
}

.mobile-device .items-table {
  overflow-x: auto;
  -webkit-overflow-scrolling: touch;
}

/* Mobile scroll hint styling */
.mobile-scroll-hint {
  text-align: center; 
  font-size: 11px; 
  color: #666; 
  margin-bottom: 10px; 
  padding: 8px; 
  background: linear-gradient(135deg, #f0f0f0 0%, #e0e0e0 100%); 
  border-radius: 6px;
  border: 1px solid #ccc;
  animation: pulse 2s infinite;
}

@keyframes pulse {
  0% { opacity: 0.8; }
  50% { opacity: 1; }
  100% { opacity: 0.8; }
}

/* Touch-friendly improvements */
.mobile-device .saved-invoice-row {
  padding: 15px 0 !important;
  border-bottom: 2px solid #eee !important;
}

.mobile-device .modal-content {
  padding: 20px !important;
  border-radius: 12px !important;
}

/* Tablet responsive */
@media (max-width: 1024px) and (min-width: 769px) {
  .container { max-width: 90%; }
  .control-panel { grid-template-columns: 1fr; }
}

